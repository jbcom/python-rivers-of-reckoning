[tox]
envlist = py310, py311, py312, py313, lint, docs
isolated_build = True
requires =
    tox>=4.0
    tox-uv>=1.0
    tox-gh-actions>=3.0

[gh-actions]
python =
    3.10: py310
    3.11: py311
    3.12: py312
    3.13: py313

[testenv]
runner = uv-venv-lock-runner
deps =
    pytest>=9.0.2
    pygame-ce>=2.5.0
commands =
    pytest tests/ -v

[testenv:lint]
runner = uv-venv-lock-runner
deps =
    flake8>=7.3.0
    black>=24.0.0
commands =
    black --check src/ tests/ main.py
    flake8 src/ tests/ main.py --max-line-length=127

[testenv:format]
runner = uv-venv-lock-runner
deps =
    black>=24.0.0
commands =
    black src/ tests/ main.py

[testenv:docs]
runner = uv-venv-lock-runner
changedir = docs
deps =
    sphinx>=9.0.4
    sphinx-rtd-theme>=3.0.2
commands =
    sphinx-build -b html . _build/html

[testenv:web]
runner = uv-venv-lock-runner
deps =
    pygbag>=0.9.2
commands =
    pygbag --build main.py
