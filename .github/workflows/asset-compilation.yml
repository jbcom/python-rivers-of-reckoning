name: Asset Validation

on:
  push:
    branches: [ "main" ]
  pull_request:
    branches: [ "main" ]

permissions:
  contents: read

jobs:
  validate-assets:
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@8e8c483db84b4bee98b60c0593521ed34d9990e8 # v6

    - name: Set up Python 3.13
      uses: actions/setup-python@83679a892e2d95755f2dac6acb0bfd1e9ac5d548 # v6
      with:
        python-version: "3.13"

    - name: Install system dependencies
      run: |
        sudo apt-get update
        sudo apt-get install -y libsdl2-dev

    - name: Install dependencies
      run: |
        python -m pip install --upgrade pip
        pip install pygame-ce
        pip install -e .

    - name: Validate game modules
      run: |
        python -c "
        from first_python_rpg.game import Game
        from first_python_rpg.player import Player
        from first_python_rpg.enemy import Enemy
        from first_python_rpg.map import Map
        from first_python_rpg.engine import Engine
        print('✓ All game modules imported successfully')
        print('✓ Asset validation passed')
        "

    - name: Validate map data
      run: |
        python -c "
        from first_python_rpg.map_data import ENEMY_TYPES, EVENT_TYPES, DIFFICULTY_LEVELS
        print(f'✓ {len(ENEMY_TYPES)} enemy types loaded')
        print(f'✓ {len(EVENT_TYPES)} event types loaded')
        print(f'✓ {len(DIFFICULTY_LEVELS)} difficulty levels loaded')
        print('✓ Map data validation passed')
        "
